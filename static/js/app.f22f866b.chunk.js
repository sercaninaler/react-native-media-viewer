(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{89:function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(14),i=n.n(o),c=n(23),s=n.n(c),l=n(12),u=n.n(l),f=n(4),d=n(13),g=n(90),p=n(16),m=n(30),h=n(83),y=n(84),b=n(80),w=n.n(b),E=function(e){return"https://pixabay.com/api/?key=14265060-81ead90aa88e46a5937fa954d\n&q="+e+"&image_type=photo&safesearch=true&orientation=horizontal&per_page=100"},O=["animals","fruits","planets"],k={theme:"light"},x=n(81),C=n.n(x),S=n(82),v=new(n.n(S).a),j=C.a.create(v,{}),L=function(e,t){return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.a.awrap(j.set(e,t));case 3:n.next=7;break;case 5:n.prev=5,n.t0=n.catch(0);case 7:case"end":return n.stop()}}),null,null,[[0,5]])},P=function(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.awrap(j.get(e));case 3:return t.abrupt("return",t.sent);case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),null,null,[[0,6]])},D=n(88),F={app:{paddingTop:15,paddingBottom:10,height:"100%",backgroundColor:"#000000",overflow:"hidden"},button:{backgroundColor:"#eee",padding:3,paddingLeft:8,paddingRight:8,borderRadius:4,borderColor:"#ddd",borderWidth:1,width:"fit-content",margin:2},searchForm:{justifyContent:"center",flexDirection:"row"},searchButtonView:{height:40,marginLeft:12,marginTop:3},searchButton:{height:48,padding:4,fontSize:18,borderRadius:7},searchInput:{fontSize:16,padding:8,backgroundColor:"#eee",borderColor:"#ddd",borderWidth:1,borderRadius:5,width:260,height:40},tags:{flexDirection:"row",flexWrap:"wrap",justifyContent:"center",marginTop:15,marginBottom:15,marginLeft:"auto",marginRight:"auto",maxWidth:800},message:{flexWrap:"wrap",justifyContent:"center",marginTop:25,color:"red",fontSize:16,alignSelf:"center"},loader:{flex:1,flexDirection:"row",justifyContent:"space-around",alignItems:"center",position:"absolute",top:0,width:"100%",backgroundColor:"#FFF",height:"100%",opacity:.7,zIndex:1,paddingBottom:100},footer:{backgroundColor:"#ececec",padding:"10 0",position:"absolute",width:"100%",bottom:0,left:0,display:"flex",justifyContent:"center",flexDirection:"row",flexWrap:"wrap"},footerLink:{margin:"0 5",borderColor:"#ddd",padding:5,paddingLeft:10,paddingRight:10},pictureHolder:{flexDirection:"column",justifyContent:"center",position:"relative",alignItems:"center"},picture:{marginTop:"5%",marginBottom:"10%"},pictureInfo:{position:"absolute",bottom:"17%",flexDirection:"row",alignSelf:"center"}};function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(n,!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(){P("pictures").then((function(e){null===e&&L("pictures",JSON.stringify({})).then()})),P("tags").then((function(e){null===e&&L("tags",JSON.stringify(O)).then()})),P("settings").then((function(e){null===e&&L("settings",JSON.stringify(k)).then()}));var e=Object(r.useState)([]),t=u()(e,2),n=t[0],o=t[1],c=Object(r.useState)(""),l=u()(c,2),b=l[0],x=l[1],C=Object(r.useState)(0),S=u()(C,2),v=S[0],j=S[1],J=Object(r.useState)(null),N=u()(J,2),T=N[0],W=N[1],R=Object(r.useState)(!1),B=u()(R,2),z=B[0],M=B[1],_=Object(r.useState)(10),U=u()(_,2),H=U[0],A=U[1],V=Object(r.useState)(k),q=u()(V,2),G=q[0],K=q[1],Q=Object(r.useState)([]),X=u()(Q,2),Y=X[0],Z=X[1];Object(r.useEffect)((function(){P("settings").then((function(e){K(JSON.parse(e))})),P("tags").then((function(e){Z(JSON.parse(e))})),P("pictures").then((function(e){o(JSON.parse(e))}))}),[]);var $=F,ee=G.theme;"light"===ee&&($=I({},F,{app:I({},F.app,{backgroundColor:"#FFFFFF"})}));var te=function(e){var t,r,a,c;return i.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.trim(),W(null),A(10),M(!0),Array.isArray(n[t])&&n[t].length&&!(Math.round((new Date).getTime()/1e3)-n[t+"_lastUpdate"]>43200)){s.next=12;break}return s.next=7,i.a.awrap(w.a.get(E(t)));case 7:r=s.sent,(a=r.data.hits).length?(ne(t),c=[],a.forEach((function(e){c.push({image:e.webformatURL,tags:e.tags,isDeleted:!1})})),n[t]=c,n[t+"_lastUpdate"]=Math.round((new Date).getTime()/1e3),L("pictures",JSON.stringify(n)),o(I({},n))):setTimeout((function(){W("Couldn't find any results ")}),500),s.next=13;break;case 12:-1===Y.indexOf(t)&&ne(t);case 13:setTimeout((function(){M(!1)}),100);case 14:case"end":return s.stop()}}))},ne=function(e){""!==e&&-1===Y.indexOf(e)&&(Y.unshift(e),Z(Y),L("tags",JSON.stringify(Y)))},re=null,ae=function(e){n[b][e].showInfo=!n[b][e].showInfo,o(I({},n))},oe=function(){j(v+1)},ie=n[b]?n[b].filter((function(e){return!e.isDeleted})).slice(0,H):[];return a.a.createElement(f.a,{style:$.app},a.a.createElement(f.a,{style:$.searchForm},a.a.createElement(g.a,{style:$.searchInput,value:b,onChangeText:function(e){return function(e){x(e.toLowerCase())}(e)},onSubmitEditing:function(){te(b)},placeholder:"cats, planets, fruits,...",selectTextOnFocus:!0})),a.a.createElement(f.a,{style:$.tags},Y.map((function(e){return a.a.createElement(p.a,{key:e,style:$.button,underlayColor:"#cccccc",onPress:function(){x(e),te(e)}},a.a.createElement(d.a,null,e))}))),T&&a.a.createElement(d.a,{style:$.message},T),z&&a.a.createElement(f.a,{style:$.loader},a.a.createElement(h.a,{size:"large",color:"#0000ff"})),!z&&0!==ie.length&&a.a.createElement(f.a,{style:$.pictureHolder},ie.map((function(e,t){return a.a.createElement(m.a,{key:e.image,onLongPress:function(){return ae(t)},onPress:function(){return function(e){var t=Date.now();re&&t-re<300?ae(e):re=t}(t)}},a.a.createElement(f.a,{style:$.pictureHolder},a.a.createElement(D.a,{style:$.picture,source:{uri:e.image},width:y.a.get("window").width}),e.showInfo&&a.a.createElement(f.a,{style:$.pictureInfo},a.a.createElement(p.a,{underlayColor:"#cccccc",style:I({},$.button,{marginLeft:2,marginRight:2}),onPress:function(){return function(e){n[b][e].isDeleted=!0,n[b+"_lastUpdate"]=Math.round((new Date).getTime()/1e3),L("pictures",JSON.stringify(n)),o(I({},n))}(t)}},a.a.createElement(d.a,null,"x")),e.tags.split(",").map((function(e){return a.a.createElement(p.a,{key:e,style:I({},$.button,{marginLeft:2,marginRight:2}),underlayColor:"#cccccc",onPress:function(){x(e.trim()),te(e)}},a.a.createElement(d.a,null,e))})))))})),a.a.createElement(p.a,{style:I({},$.button,{marginBottom:70,marginLeft:"auto",marginRight:"auto"}),underlayColor:"#cccccc",onPress:function(){return A(H+10)}},a.a.createElement(d.a,null,"Load More"))),a.a.createElement(f.a,{style:$.footer},v<4&&a.a.createElement(a.a.Fragment,null,a.a.createElement(p.a,{style:$.footerLink,underlayColor:"#ccc",onPress:function(){oe()}},a.a.createElement(d.a,null,"Media Viewer")),a.a.createElement(p.a,{style:I({},$.footerLink,{borderLeftWidth:1}),underlayColor:"#ccc",onPress:function(){!function(e,t){var n=I({},G,s()({},e,t));K(n),L("settings",JSON.stringify(n))}("theme","dark"===ee?"light":"dark")}},a.a.createElement(d.a,null,"dark"===ee?"Light":"Dark"," Mode"))),v>20&&a.a.createElement(p.a,{style:$.footerLink,onPress:function(){return oe()},underlayColor:"#ccc"},a.a.createElement(d.a,null,"Language (English)")),4===v&&a.a.createElement(p.a,{style:$.footerLink,onPress:function(){return oe()},underlayColor:"#ccc"},a.a.createElement(d.a,null,"Settings")),v>4&&a.a.createElement(p.a,{style:$.footerLink,onPress:function(){return j(0)},underlayColor:"#ccc"},a.a.createElement(d.a,null,"Back")),v>4&&a.a.createElement(p.a,{style:I({},$.footerLink,{borderLeftWidth:1}),underlayColor:"#ccc",onPress:function(){localStorage.setItem("tags",JSON.stringify([])),Z([]),x("")}},a.a.createElement(d.a,null,"Clear tags")),v>4&&a.a.createElement(p.a,{style:I({},$.footerLink,{borderLeftWidth:1}),underlayColor:"#ccc",onPress:function(){o([]),localStorage.setItem("pictures",JSON.stringify({}))}},a.a.createElement(d.a,null,"Clear cache"))))};window.oncontextmenu=function(e){return e.preventDefault(),e.stopPropagation(),!1};t.a=N},91:function(e,t,n){n(92),e.exports=n(139)},92:function(e,t){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/expo-service-worker.js",{scope:"/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))}},[[91,1,2]]]);
//# sourceMappingURL=../../4374c55f9e3d252b1777.map